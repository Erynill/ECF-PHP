{% extends "base.html.twig" %}

{% block title %}Livres
{% endblock %}

{% block stylesheet %}
	<link
		rel="stylesheet"
		href="/assets/css/output.css">
{% endblock %}

{% block script %}
	 <script type="module" src="/assets/js/allLivres.js"></script>
{% endblock %}

{% block body %}
	{% include "components/navbar.html.twig" %}
	<main
		class="w-8/10 m-auto">
		{% if role == "admin" %}
			<a
				href="/livres/add">
				<button
					class="boutton bg-teal-400 hover:bg-teal-600 m-7 mt-10 text-2xl">Ajouter
				</button>
			</a>
		{% endif %}

		<div
			class="grid grid-cols-3 gap-20 w-full mt-10">
			{% for value in data %}
				<a
					href="/livres/{{value.livres.id}}">
					<div
						class="relative">
						<article
							class="card">
							<div
								class="absolute top-4 right-4">
								<svg
									xmlns="http://www.w3.org/2000/svg"
									fill="none"
									viewbox="0 0 24 24"
									stroke-width="1.5"
									stroke="currentColor"
									class="size-8 like"
									{% if value.livres.like %} data-like="1"
									{% else %} data-like="0"
									{% endif %} data-id="{{value.livres.id}}">
									<path
										stroke-linecap="round"
										stroke-linejoin="round"
										d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"/>
								</svg>
							</div>
							{{ value.livres.synopsis|raw }}
							<div
								class="flex mt-auto">
								<h3
									class="text-2xl font-semibold">
									{{value.auteurs.prenom}}
									{{value.auteurs.nom}}
								</h3>
								<span
									class="ml-auto text-xl italic">
									{{value.livres.annee_publication}}
								</span>
							</div>
							<span
								class="italic">
								{{value.categories.nom}}
							</span>
						</article>
					</div>
				</a>
			{% endfor %}
		</div>
		<div
			class="flex justify-center w-full my-10">
			{% if paginator.numPages > 1 %}
				<ul
					class="flex">
					{% if paginator.prevUrl %}
						<li>
							<a
								class="bg-white p-2 border"
								href="{{ paginator.prevUrl }}">&laquo; Previous
							</a>
						</li>
					{% endif %}

					{% for page in paginator.pages %}
						{% if page.url %}
							<li
								{{ page.isCurrent ? 'class="active"' : '' }}>
								<a
									class="bg-white p-2 border"
									href="{{ page.url }}">{{ page.num }}
								</a>
							</li>
						{% else %}
							<li
								class="disabled">
								<span>{{ page.num }}
								</span>
							</li>
						{% endif %}
					{% endfor %}

					{% if paginator.nextUrl %}
						<li>
							<a
								class="bg-white p-2 border"
								href="{{ paginator.nextUrl }}">Next &raquo;
							</a>
						</li>
					{% endif %}
				</ul>
			{% endif %}
		</div>
	</main>
{% endblock %}
